<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>レッスン２</title>
</head>
<body>
<div style="max-width: 800px; margin: 0 auto; width: 90%;">
  
<h1>Pandas（パンダス）とは？</h1>
<p>Pandasは、Pythonで<strong>表形式のデータ</strong>を効率的に扱うためのライブラリです。</p>
<p>「表計算データを簡単に操作したい」「CSVやExcelファイルを読み書きしたい」といったときに活躍します。</p>

<h2>Pandasを使うメリット</h2>
<ul>
  <li>行と列で構成されたデータ（表形式）を簡単に操作できる</li>
  <li>データの読み込み・加工・集計・出力まで一貫して行える</li>
  <li>ExcelやCSV、SQLデータなど、さまざまな形式のデータを扱える</li>
  <li>データ分析・前処理・可視化の下準備に最適</li>
</ul>

<h2>PandasのDataFrame（データフレーム）の作成</h2>
<p><strong>DataFrame</strong>とは、Pandasで扱う基本的な表形式のデータ構造です。</p>
<p>行と列を持ち、Excelのようにラベル付きでデータを管理できます。</p>

<h3>基本のDataFrame作成（辞書から）</h3>
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        width: 100%;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) data = {
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '年齢': [23, 25, 22],
(6)     '出身地': ['東京', '大阪', '福岡']
(7) }
(8) 
(9) df = pd.DataFrame(data)
(10) print(df)</code></pre>
      </div>
    </td>
  </tr>
</table>

<h2>出力例</h2>
<pre style="background-color: #f7f7f8; padding: 8px; border-radius: 4px; font-size: 16px;"> 
   名前  年齢  出身地
0  太郎   23   東京
1  花子   25   大阪
2  次郎   22   福岡
</pre>

<h2>列の順序を指定して作成</h2>
<pre style="background-color: #f7f7f8; padding: 8px; border-radius: 4px; font-size: 16px;">
df = pd.DataFrame(data, columns=['名前', '出身地', '年齢'])
</pre>

<h2>行ラベル（インデックス）を指定して作成</h2>
<pre style="background-color: #f7f7f8; padding: 8px; border-radius: 4px; font-size: 16px;">
df = pd.DataFrame(data, index=['a', 'b', 'c'])
</pre>

 <!--------------------------------------------------------------------------------------->
 <ul><li><h1>列の選択</li></ul>
<!---------------------------------------------------------------------------------------> 

<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '年齢': [23, 25, 22],
(6)     '出身地': ['東京', '大阪', '福岡']
(7) })
(8) 
(9) print(df['名前'])  # 1列だけ（Series型で返る）
</code></pre>
      </div>
    </td>
  </tr>
</table>

<!--------------------------------------------------------------------------------------->
<h1><ul><li>1列だけ選ぶ（Series型で取得）</li></ul></h1>
 <!--------------------------------------------------------------------------------------->
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '年齢': [23, 25, 22],
(6)     '出身地': ['東京', '大阪', '福岡']
(7) })
(8) 
(9) print(df['名前'])  # 1列だけ（Series型で返る）
</code></pre>
      </div>
    </td>
  </tr>
</table>

<!--------------------------------------------------------------------------------------->
<h1><ul><li>複数の列を選ぶ（DataFrame型で取得）</li></ul></h1>
 <!--------------------------------------------------------------------------------------->
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) print(df[['名前', '年齢']])  # 複数列（DataFrame型で返る）
</code></pre>
      </div>
    </td>
  </tr>
</table>

  <!--------------------------------------------------------------------------------------->
<h1><ul><li>新しい列を追加する</li></ul></h1>
 <!--------------------------------------------------------------------------------------->
  <table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) df['得点'] = [80, 90, 85]  # 新しい列「得点」を追加
(2) print(df)                # 結果を表示
</code></pre>
      </div>
    </td>
  </tr>
</table>


 <!--------------------------------------------------------------------------------------->
 <ul><li><h1>列の選択</li></ul>
<!---------------------------------------------------------------------------------------> 
   <!--------------------------------------------------------------------------------------->
<h1><ul><li>行番号（整数）で1行選ぶ（.iloc[]）</li></ul></h1>
 <!---------------------------------------------------------------------------------------> 
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '年齢': [23, 25, 22],
(6)     '出身地': ['東京', '大阪', '福岡']
(7) })
(8) 
(9) print(df.iloc[0])  # 0番目の行（太郎のデータ）
</code></pre>
      </div>
    </td>
  </tr>
</table>

 <!--------------------------------------------------------------------------------------->
<h1><ul><li>インデックスラベルで選ぶ（.loc[]）</li></ul></h1>
 <!---------------------------------------------------------------------------------------> 
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) df.index = ['a', 'b', 'c']  # 行に名前（インデックスラベル）をつける
(2) print(df.loc['b'])         # b行（花子のデータ）を取得
</code></pre>
      </div>
    </td>
  </tr>
</table>

 <!--------------------------------------------------------------------------------------->
<h1><ul><li>複数行を選ぶ（スライス）</li></ul></h1>
 <!---------------------------------------------------------------------------------------> 
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) print(df.iloc[0:2])  # 最初の2行（太郎・花子）を取得
</code></pre>
      </div>
    </td>
  </tr>
</table>

 <!--------------------------------------------------------------------------------------->
 <ul><li><h1>データの基本情報を確認する方法（DataFrameの構造や統計）</li></ul>
<!---------------------------------------------------------------------------------------> 
   <!--------------------------------------------------------------------------------------->
<h1><ul><li>.info()：列ごとの型や欠損の有無を確認</li></ul></h1>
 <!--------------------------------------------------------------------------------------->   
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '年齢': [23, 25, 22],
(6)     '出身地': ['東京', '大阪', '福岡']
(7) })
(8) 
(9) df.info()  # 列のデータ型や非null数などを確認
</code></pre>
      </div>
    </td>
  </tr>
</table>

 <!--------------------------------------------------------------------------------------->
 <ul><li><h1>pandas の条件付きフィルタリング（ブールインデックス）</li></ul>
<!---------------------------------------------------------------------------------------> 
   <!--------------------------------------------------------------------------------------->
<h1><ul><li>単一条件でのフィルタリング</li></ul></h1>
 <!--------------------------------------------------------------------------------------->     
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '年齢': [23, 25, 22],
(6)     '出身地': ['東京', '大阪', '福岡']
(7) })
(8) 
(9) result = df[df['年齢'] >= 23]
(10) print(result)  # 年齢が23歳以上の行を抽出
</code></pre>
      </div>
    </td>
  </tr>
</table>
   <!--------------------------------------------------------------------------------------->
<h1><ul><li>複数条件でのフィルタリング（& / | を使う）</li></ul></h1>
 <!--------------------------------------------------------------------------------------->     
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) result = df[(df['年齢'] >= 23) & (df['出身地'] == '東京')]
(2) print(result)  # 年齢23歳以上かつ東京出身
</code></pre>
      </div>
    </td>
  </tr>
</table>

 <!--------------------------------------------------------------------------------------->
 <ul><li><h1>pandas による「列の合計・平均・分散・標準偏差」</li></ul>
<!---------------------------------------------------------------------------------------> 
 <!--------------------------------------------------------------------------------------->
<h1><ul><li>列ごとの合計・平均・分散・標準偏差を求める</li></ul></h1>
 <!--------------------------------------------------------------------------------------->       
  <table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '国語': [80, 90, 85],
(6)     '数学': [70, 88, 82],
(7)     '英語': [75, 95, 80]
(8) })
(9) 
(10) print(df[['国語', '数学', '英語']].sum())   # 各列の合計
(11) print(df[['国語', '数学', '英語']].mean())  # 各列の平均
(12) print(df[['国語', '数学', '英語']].var())   # 各列の分散
(13) print(df[['国語', '数学', '英語']].std())   # 各列の標準偏差
</code></pre>
      </div>
    </td>
  </tr>
</table>
 <!--------------------------------------------------------------------------------------->
<h1><ul><li>行ごとの合計・平均も可能</li></ul></h1>
 <!--------------------------------------------------------------------------------------->       
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.5;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) df['合計'] = df[['国語', '数学', '英語']].sum(axis=1)
(2) df['平均'] = df[['国語', '数学', '英語']].mean(axis=1)
(3) print(df)
</code></pre>
      </div>
    </td>
  </tr>
</table>

 <!--------------------------------------------------------------------------------------->
<h1><ul><li>describe() の基本的な使い方</li></ul></h1>
 <!--------------------------------------------------------------------------------------->       
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.6;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) 
(3) df = pd.DataFrame({
(4)     '名前': ['太郎', '花子', '次郎'],
(5)     '国語': [80, 90, 85],
(6)     '数学': [70, 88, 82],
(7)     '英語': [75, 95, 80]
(8) })
(9) 
(10) print(df.describe())
</code></pre>
      </div>
    </td>
  </tr>
</table>
<div style="
  background-color: #f7f7f8;
  color: #333;
  font-family: monospace;
  font-size: 16px;
  line-height: 1.6;
  padding: 12px;
  border-radius: 6px;
  width: 100%;
  max-width: 800px;
  overflow: auto;
  margin: auto;
">
<pre style="margin: 0;">
             国語        数学        英語
count   3.000000   3.000000   3.000000
mean   85.000000  80.000000  83.333333
std     5.000000   9.849155  10.408330
min    80.000000  70.000000  75.000000
25%    82.500000  76.000000  77.500000
50%    85.000000  82.000000  80.000000
75%    87.500000  85.000000  87.500000
max    90.000000  88.000000  95.000000
</pre>
</div>
             
 <!--------------------------------------------------------------------------------------->
 <ul><li><h1>欠損値の確認、補完、削除</li></ul>
<!---------------------------------------------------------------------------------------> 
<table border="0" cellspacing="0" cellpadding="0" style="background-color: #f0f0f0; width: 100%; max-width: 800px; margin: auto;">
  <tr>
    <td>
      <div style="
        background-color: #f7f7f8;
        color: #333;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.6;
        padding: 12px;
        border-radius: 6px;
        overflow: auto;">
<pre style="margin: 0;"><code>(1) import pandas as pd
(2) import numpy as np
(3) 
(4) # サンプルデータ作成（欠損値 NaN を含む）
(5) df = pd.DataFrame({
(6)     '名前': ['太郎', '花子', '次郎', '三郎'],
(7)     '国語': [80, np.nan, 85, 90],
(8)     '数学': [70, 88, np.nan, 75],
(9)     '英語': [75, 95, 80, np.nan]
(10) })
(11) 
(12) # 欠損値の確認
(13) print(df.isnull())          # Trueが欠損値の場所
(14) print(df.isnull().sum())    # 各列の欠損値の数
(15) 
(16) # 欠損値の補完（例：平均値で補完）
(17) df_filled = df.fillna(df.mean(numeric_only=True))
(18) print(df_filled)
(19) 
(20) # 欠損値を含む行の削除
(21) df_dropped = df.dropna()
(22) print(df_dropped)
</code></pre>
      </div>
    </td>
  </tr>
</table>



  

  
  <a href="index.html">トップページに戻る</a>
  <br>
  </div>
</body>
</html>
